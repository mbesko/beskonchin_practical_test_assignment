# AVLTree

Данный репозиторий содержит реализацию [АВЛ-дерева](https://ru.wikipedia.org/wiki/АВЛ-дерево) на языке Python.  
АВЛ-дерево — это **сбалансированное двоичное дерево поиска**, у которого разница высот левого и правого поддеревьев каждого узла не превышает 1.
Код расположен в файле [`AVL.py`](AVL.py). Тесты, написанные на **pytest**, — в файле [`test_AVL.py`](test_AVL.py).


## Особенности

- **Базовые операции** над деревом: 
  - `insert(key)` — вставка ключа
  - `delete(key)` — удаление ключа
  - `search(key)` — поиск ключа
- **Дополнительные операции**:
  - `split(key)` — разделение дерева на два (с ключами \(\leq key\) и \(> key\))
  - `merge(T1, T2)` — слияние двух АВЛ-деревьев (все ключи \(T1 \leq\) все ключи \(T2\))
- **Вспомогательные функции**:
  - `inorder_traversal()` — симметричный (in-order) обход дерева, возвращает отсортированный список ключей
  - `count_nodes()` — возвращает общее количество узлов в дереве
  - `validate_avl()` — проверяет корректность структуры дерева (свойство BST и балансировку)

  
## Краткие замечания по коду

- Вставка и удаление реализованы рекурсивно.  
- Балансировка выполняется стандартными поворотами: `rotate_left`, `rotate_right`.  
- За счёт балансировки высота дерева остаётся \(O(\log n)\), что даёт эффективный поиск, вставку и удаление.  
- Валидацию дерева можно использовать для отладки и проверки структуры (полезна в тестах или во время разработки).

# MyHashMap

Это пример реализации **ассоциативного массива** (или **словаря**, **Map**) на Python с использованием **хеш-таблицы** и метода **цепочек** (chaining).  
Код расположен в файле [`MyHashMap.py`](MyHashMap.py). Тесты, написанные на **pytest**, — в файле [`test_MyHashMap.py`](test_MyHashMap.py).

## Необходимые и достаточные операции

В контексте ассоциативного массива (абстракции key-value), **минимально необходимыми** операциями являются:

1. **Вставка/обновление** значения по ключу (`put(key, value)`).  
2. **Получение** значения по ключу (`get(key)`).  
3. **Удаление** по ключу (`remove(key)`).

**Почему это необходимо и достаточно:**
- Без операции **вставки** мы не сможем занести новую пару (ключ, значение).  
- Без операции **получения** мы не сможем извлекать уже сохранённые данные.  
- Без операции **удаления** мы не сможем освобождать место и избавляться от ненужных или устаревших пар.

Все остальные функции (например, проверка существования ключа, итерирование по ключам или значениям и т.д.) являются **дополнительными** и **надстраиваются** поверх трёх базовых.

## Краткое описание реализации

- **Метод хранения**: хеш-таблица разбивается на _N_ «бакетов» (списков). Для каждого ключа вычисляется `hash(key)`, и результат берётся по модулю _N_. Таким образом получаем индекс списка, где храним пары `(ключ, значение)`.
- **Метод разрешения коллизий**: используется метод **цепочек** (от англ. _chaining_) — в одном бакете мы формируем список всех пар, чей хеш приводит к этому же индексу.
- **Расширение (rehash)**: если коэффициент загрузки (число элементов / число бакетов) превышает заранее заданный порог (по умолчанию `0.75`), размер хеш-таблицы увеличивается примерно вдвое, а все пары заново распределяются по новым бакетам.
- **Сложность**:
  - Амортизированно операции `put`, `get`, `remove` работают за _O(1)_, при условии равномерного распределения хеш-функции и корректной реализации расширения.


---
## Структура репозитория

```
.
├── AVL.py          # Основной модуль с реализацией AVLTree и Node
├── MyHashMap.py    # Реализация хеш-таблицы (MyHashMap)
├── test_AVL.py     # Набор тестов на pytest
└── MyHashMap.py    # Набор тестов на pytest
```

- **`AVL.py`** — содержит классы:
  - `Node` — структура узла (ключ, высота, ссылки на левых/правых потомков)
  - `AVLTree` — класс дерева с описанными операциями.

- **`MyHashMap.py`** — содержит класс:
  - `MyHashMap` — класс ассоциативного массива.
    
- **`test_AVL.py`** и **`test_MyHashMap.py`**— тесты, написанные на **pytest**, для проверки корректной работы основных и дополнительных операций.

## Установка и запуск

Для локального использования и тестирования:
1. Склонируйте репозиторий или скопируйте файлы к себе в проект.
2. Убедитесь, что у вас установлен Python 3.7+ (рекомендуется 3.8 и выше).
3. При необходимости установите pytest для запуска тестов:
   ```bash
   pip install pytest
   ```
4. Запустите тесты:
   ```bash
   pytest
   ```
   или
   ```bash
   pytest -v
   ```
   (флаг `-v` даёт более детальный вывод).


## Проверка корректности

- **Тесты** `tests_*` покрывают основные аспекты функционала:
  AVLTree:
  - Вставку и удаление разных наборов ключей
  - Поиск существующих и несуществующих значений
  - Проверку корректности балансировки (через `validate_avl`)
  - Операции `split` и `merge` в различных сценариях

  MyHashMap:
  - **`put` и `get`** — вставка и получение значения,
  - **`remove`** — удаление ключа,
  - **`size`** — корректный счётчик элементов,
  - **перезапись** значения по одному и тому же ключу (обновление),
  - **расширение (rehash)** — при превышении порога загрузки.
